<Window x:Class="M008.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:M008"
		xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        Title="MainWindow" Height="450" Width="800"
		Topmost="True" WindowStartupLocation="CenterScreen"
		DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel Margin="10">
		<!--MarkupExtension-->
		<!--Klasse, welche für alle Dinge zwischen { } im XAML verwendet werden-->
		<!--Gibt einen Wert an die GUI weiter-->
		
		<!--Beispiel: Enum an ComboBox anbinden-->
		<!--Nachteil: Im Backend werden unnötige Variablen angelegt, die nur zur Darstellung da sind-->
		<ComboBox ItemsSource="{Binding Wochentage}"/>
		
		<!--Verbesserung: Eigene MarkupExtension-->
		<ComboBox ItemsSource="{local:Enum EnumType=sys:DayOfWeek}"/>
		<ComboBox ItemsSource="{local:EnumExtension EnumType=sys:DayOfWeek}"/> <!--Identisch-->
		
		<!--Beispiel 2: Farben per MarkupExtension generieren-->
		<ListBox ItemsSource="{local:Colors}" Height="100">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<StackPanel Orientation="Horizontal">
						<Rectangle Fill="{Binding Brush}" Stroke="Black" Width="20" Height="20"/>
						<TextBlock Text="{Binding Name}" Margin="5, 0"/>
						<TextBlock Text="{Binding Color, StringFormat='({0})'}"/>
					</StackPanel>
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>
		
		<!--.............................................................................-->
		
		<!--Self-->
		<Slider Minimum="0" Maximum="100" Name="RectSlider"/>
		<Rectangle Width="{Binding ElementName=RectSlider, Path=Value}"
				   Height="{Binding RelativeSource={RelativeSource Self}, Path=Width}"
				   Fill="Aqua"/>
		
		<!--TemplatedParent-->
		<!--Identisch zu TemplateBinding-->
		<Button Content="Hallo Welt" Background="Aqua">
			<Button.Template>
				<ControlTemplate TargetType="Button">
					<Border BorderBrush="Black" BorderThickness="1">
						<Border BorderBrush="Aqua" BorderThickness="3">
							<TextBlock Text="{TemplateBinding Content}"
									   Background="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background}"
								       HorizontalAlignment="Stretch"
								       TextAlignment="Center"/>
						</Border>
					</Border>
				</ControlTemplate>
			</Button.Template>
		</Button>
		
		<!--FindAncestor-->
		<!--Sucht in einem Elternteil nach einem Property-->
		<Grid Background="Orange">
			<Grid Background="Aqua">
				<Grid Background="LightGreen">
					<Button Background="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}, AncestorLevel=3}, Path=Background}"
							Content="Hallo"/>
				</Grid>
			</Grid>
		</Grid>
		
		<!--PreviousData-->
		<!--Innerhalb einer Listenkomponente auf den vorherigen Datensatz zugreifen-->
		<ListBox ItemsSource="{Binding Wochentage}">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<StackPanel Orientation="Horizontal">
						<TextBlock Text="{Binding .}"/> <!--Binding .: Binding uaf das Element selbst-->
						<TextBlock Text="{Binding RelativeSource={RelativeSource Mode=PreviousData}}"/>
					</StackPanel>
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>
	</StackPanel>
</Window>
